{% extends 'parser/html/base.html' %}

{% block content %}
<div class="vacancies-container">
    <div class="vacancies-header">
        <h1>üìã –°–ø–∏—Å–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π</h1>
        
        <div class="vacancies-controls">
            <form method="get" class="search-form">
                <div class="search-group">
                    <input type="text" name="search" value="{{ search_query }}" 
                           placeholder="–ü–æ–∏—Å–∫ –ø–æ –≤–∞–∫–∞–Ω—Å–∏—è–º..." class="search-input">
                    <button type="submit" class="btn btn-primary">üîç –ù–∞–π—Ç–∏</button>
                </div>
            </form>
            
            <div class="vacancies-stats">
                <span class="stat-badge">–ù–∞–π–¥–µ–Ω–æ: {{ vacancies_count }}</span>
                <a href="{% url 'parser' %}" class="btn btn-outline">–î–æ–±–∞–≤–∏—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏</a>
            </div>
        </div>
    </div>

    {% if vacancies %}
        <div class="vacancies-list">
            {% for vacancy in vacancies %}
            <div class="vacancy-item">
                <div class="vacancy-header">
                    <h3 class="vacancy-title">
                        <a href="{{ vacancy.link }}" target="_blank" class="vacancy-link">
                            {{ vacancy.title }}
                        </a>
                    </h3>
                    <span class="vacancy-salary">{{ vacancy.salary }}</span>
                </div>
                
                <div class="vacancy-company">{{ vacancy.company }}</div>
                
                <div class="vacancy-meta">
                    <span class="meta-item">
                        üìä –û–ø—ã—Ç: {{ vacancy.get_experience_display }}
                    </span>
                    <span class="meta-item">
                        {{ vacancy.get_employment_display }}
                    </span>
                    <span class="meta-item">
                        {{ vacancy.created_at|date:"d.m.Y H:i" }}
                    </span>
                </div>
                
                {% if vacancy.skills %}
                <div class="vacancy-skills">
                    <strong>–ù–∞–≤—ã–∫–∏:</strong>
                    <div class="skills-list">
                        {{ vacancy.skills }}
                    </div>
                </div>
                {% endif %}
                
                {% if vacancy.description %}
                <div class="vacancy-description">
                    <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong>
                    <p>{{ vacancy.description|truncatewords:50 }}</p>
                </div>
                {% endif %}
                
                <div class="vacancy-actions">
                    <a href="{{ vacancy.link }}" target="_blank" class="btn btn-outline btn-small">
                        –û—Ç–∫—Ä—ã—Ç—å –Ω–∞ HH.ru
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if vacancies_count > 20 %}
        <div class="pagination">
            <p>–ü–æ–∫–∞–∑–∞–Ω–æ {{ vacancies_count }} –≤–∞–∫–∞–Ω—Å–∏–π</p>
        </div>
        {% endif %}
        
    {% else %}
        <div class="no-vacancies">
            <div class="empty-state">
                <h3>–í–∞–∫–∞–Ω—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä –¥–ª—è —Å–±–æ—Ä–∞ –≤–∞–∫–∞–Ω—Å–∏–π</p>
                <a href="{% url 'parser' %}" class="btn btn-primary">
                    üîç –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä
                </a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}