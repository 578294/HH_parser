<!-- templates/parser/html/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}HH Parser - –ü–∞—Ä—Å–µ—Ä –≤–∞–∫–∞–Ω—Å–∏–π{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'parser/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'parser/css/filters.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-menu">
                <a href="{% url 'index' %}" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                <a href="{% url 'parser' %}" class="nav-link">üîç –ü–∞—Ä—Å–µ—Ä</a>
                <a href="{% url 'vacancy_list' %}" class="nav-link">üìã –í–∞–∫–∞–Ω—Å–∏–∏</a>
            </div>
            <div class="nav-stats">
                <span class="stat-badge" id="totalVacancies">–í–∞–∫–∞–Ω—Å–∏–π: {{ total_vacancies|default:0 }}</span>
            </div>
        </div>
    </nav>

    <main class="main-content">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="footer">
        <div class="footer-container">
            <p>&copy; 2025 HH Parser. –ü–∞—Ä—Å–µ—Ä –≤–∞–∫–∞–Ω—Å–∏–π HeadHunter</p>
        </div>
    </footer>

    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ JavaScript —Ñ–∞–π–ª—ã -->
    <script src="{% static 'parser/js/main.js' %}"></script>
    <script src="{% static 'parser/js/filters.js' %}"></script>

    <!-- –ë–ª–æ–∫ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    {% block scripts %}
    {% endblock %}

    <script>
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    document.addEventListener('DOMContentLoaded', function() {
        fetch('/api/statistics/')
            .then(response => response.json())
            .then(data => {
                const totalElement = document.getElementById('totalVacancies');
                if (totalElement && data.total_vacancies) {
                    totalElement.textContent = `–í–∞–∫–∞–Ω—Å–∏–π: ${data.total_vacancies}`;
                }
            })
            .catch(error => {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:', error);
            });
    });
    </script>
</body>
</html>