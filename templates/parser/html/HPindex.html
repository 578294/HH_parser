{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Магический парсер вакансий</title>
    <link rel="stylesheet" href="{% static 'parser/css/HPstyle.css' %}">
</head>
<body>
    <div class="container">
        <h1>МАГИЧЕСКИЙ ПАРСЕР ВАКАНСИЙ</h1>

        <div style="text-align: center; margin-bottom: 20px;">
            <button onclick="window.location.href='{% url 'index' %}'" style="background-color: #6c757d; padding: 8px 15px;">
                <i class="fas fa-arrow-left"></i> Вернуться к обычному стилю
            </button>
        </div>
        
        <div id="errorMessage" class="status-message error"></div>
        <div id="successMessage" class="status-message success"></div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('parse')">ACCIO ВАКАНСИИ</div>
            <div class="tab" onclick="switchTab('filter')">ФИЛЬТРАЦИО</div>
            <div class="tab" onclick="switchTab('generate')">ПИСЬМАГУС</div>
            <div class="tab" onclick="switchTab('export')">ЭКСПОРТИО</div>
        </div>

        <div id="parse" class="tab-content active">
            <h2>ACCIO ВАКАНСИИ</h2>
            <form id="parseForm">
                <label for="sourceUrl">СВИТОК С ВАКАНСИЯМИ:</label>
                <input type="url" id="sourceUrl" name="sourceUrl" required placeholder="https://hogwarts-careers.com/search?spell=python">
                
                <label for="pagesCount">КОЛИЧЕСТВО СТРАНИЦ:</label>
                <input type="number" id="pagesCount" name="pagesCount" min="1" max="20" value="1">
                
                <button type="button" onclick="startParsing()">ПРОИЗНЕСТИ ЗАКЛИНАНИЕ</button>
            </form>

            <div class="loading" id="loadingIndicator">
                <div class="loading-spinner"></div>
                <p>ИЩЕМ ВАКАНСИИ В ЗЕРКАЛЕ ЕИНАЛЕЖ...</p>
            </div>

            <div id="results">
                <h3>НАЙДЕНО ВАКАНСИЙ:</h3>
                <div id="vacancyResults"></div>
            </div>
        </div>

        <div id="filter" class="tab-content">
            <h2>ФИЛЬТРАЦИО</h2>
            <form id="filterForm">
                <label for="keywords">КЛЮЧЕВЫЕ СЛОВА:</label>
                <input type="text" id="keywords" name="keywords" placeholder="PYTHON, ЗЕЛЬЕВАРЕНИЕ, ЗАЩИТА ОТ ТЕМНЫХ ИСКУССТВ...">
                
                <label for="minSalary">МИНИМАЛЬНАЯ ЗАРПЛАТА (В ГАЛЕОНАХ):</label>
                <input type="number" id="minSalary" name="minSalary" placeholder="100">
                
                <label for="experience">ОПЫТ РАБОТЫ:</label>
                <select id="experience" name="experience">
                    <option value="">ЛЮБОЙ</option>
                    <option value="no">БЕЗ ОПЫТА (КАК У ПЕРВОКУРСНИКОВ)</option>
                    <option value="1-3">1-3 ГОДА (КАК У СТАРШЕКУРСНИКОВ)</option>
                    <option value="3-6">3-6 ЛЕТ (КАК У ВЫПУСКНИКОВ ХОГВАРТСА)</option>
                    <option value="6+">БОЛЕЕ 6 ЛЕТ (КАК У ПРОФЕССОРОВ)</option>
                </select>
                
                <label for="employment">ТИП ЗАНЯТОСТИ:</label>
                <select id="employment" name="employment">
                    <option value="">ЛЮБОЙ</option>
                    <option value="full">ПОЛНАЯ (КАК У ДИРЕКТОРА ШКОЛЫ)</option>
                    <option value="part">ЧАСТИЧНАЯ (КАК У ПРЕПОДАВАТЕЛЯ ПО СОВМЕСТИТЕЛЬСТВУ)</option>
                    <option value="remote">УДАЛЕННАЯ (КАК У СОВЕТНИКОВ МИНИСТЕРСТВА)</option>
                    <option value="project">ПРОЕКТНАЯ (КАК У ОХОТНИКОВ ЗА ТЕМНЫМИ АРТЕФАКТАМИ)</option>
                </select>
                
                <button type="button" class="secondary-btn" onclick="applyFilters()">ПРИМЕНИТЬ ФИЛЬТРЫ</button>
            </form>
            
            <div id="filterResults"></div>
        </div>

        <div id="generate" class="tab-content">
            <h2>ПИСЬМАГУС</h2>
            <form id="letterForm">
                <label for="selectedVacancy">ВЫБЕРИТЕ ВАКАНСИЮ:</label>
                <select id="selectedVacancy" name="selectedVacancy" required>
                    <option value="">-- ВЫБЕРИТЕ ВАКАНСИЮ --</option>
                </select>
                
                <label for="letterTemplate">ШАБЛОН ПИСЬМА:</label>
                <select id="letterTemplate" name="letterTemplate">
                    <option value="standard">СТАНДАРТНЫЙ</option>
                    <option value="support">ИНЖЕНЕР СОПРОВОЖДЕНИЯ (СТИЛЬ ГЕРМИОНЫ)</option>
                    <option value="devops">DEVOPS (СТИЛЬ РОНА)</option>
                    <option value="backend">BACKEND-РАЗРАБОТЧИК (СТИЛЬ ДАМБЛДОРА)</option>
                    <option value="frontend">FRONTEND-РАЗРАБОТЧИК (СТИЛЬ ЛЮПИНА)</option>
                    <option value="manager">МЕНЕДЖЕР (СТИЛЬ СНЕЙПА)</option>
                    <option value="custom">ПОЛЬЗОВАТЕЛЬСКИЙ (СТИЛЬ ГАРРИ)</option>
                </select>
                
                <label for="customText">ДОПОЛНИТЕЛЬНЫЙ ТЕКСТ:</label>
                <textarea id="customText" name="customText" rows="4" placeholder="НАПИШИТЕ ЧТО-НИБУДЬ ВОЛШЕБНОЕ..."></textarea>
                
                <button type="button" class="secondary-btn" onclick="generateLetter()">СОЗДАТЬ ПИСЬМО</button>
            </form>
            
            <div id="letterResult" style="margin-top: 20px; display: none;">
                <h3>РЕЗУЛЬТАТ:</h3>
                <div id="generatedLetter" class="parchment"></div>
                <button type="button" style="margin-top: 10px;" onclick="saveLetter()">СОХРАНИТЬ В КУБОК ОГНЯ</button>
            </div>
        </div>

        <div id="export" class="tab-content">
            <h2>ЭКСПОРТИО</h2>
            <form id="exportForm">
                <label for="exportType">ФОРМАТ ЭКСПОРТА:</label>
                <select id="exportType" name="exportType">
                    <option value="docx">ПЕРГАМЕНТ (DOCX)</option>
                    <option value="pdf">МАГИЧЕСКИЙ СВИТОК (PDF)</option>
                    <option value="txt">СВИТОК СОВЫ (TXT)</option>
                    <option value="csv">ТАБЛИЦА ПРЕДСКАЗАНИЙ (CSV)</option>
                    <option value="xlsx">КНИГА ЗАКЛИНАНИЙ (XLSX)</option>
                </select>
                
                <label for="exportContent">ЧТО ЭКСПОРТИРОВАТЬ:</label>
                <select id="exportContent" name="exportContent">
                    <option value="vacancies">ТОЛЬКО ВАКАНСИИ</option>
                    <option value="letters">ТОЛЬКО ПИСЬМА</option>
                    <option value="all">ВАКАНСИИ И ПИСЬМА</option>
                </select>
                
                <button type="button" onclick="exportData()">ЭКСПОРТИРОВАТЬ</button>
            </form>
        </div>
    </div>

    <script src="{% static 'parser/js/HPscript.js' %}"></script>
</body>
</html>