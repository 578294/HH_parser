<!-- templates/parser/html/index.html -->
{% extends 'parser/html/base.html' %}
{% load static %}

{% block filters %}
    {% include 'parser/html/includes/filters_section.html' %}
{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">üîç –ü–∞—Ä—Å–µ—Ä –≤–∞–∫–∞–Ω—Å–∏–π HH.ru</h1>

        <p class="hero-subtitle">
            –ù–∞—Ö–æ–¥–∏—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ª—É—á—à–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏ —Å HeadHunter –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
        </p>

        <div class="hero-stats">
            <div class="stat-card">
                <h3>{{ total_vacancies|default:0 }}</h3>
                <p>–í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π –≤ –±–∞–∑–µ</p>
            </div>
            <div class="stat-card">
                <h3>100%</h3>
                <p>–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
            </div>
            <div class="stat-card">
                <h3>24/7</h3>
                <p>–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º</p>
            </div>
        </div>

        <div class="cta-buttons">
            <a href="{% url 'parser' %}" class="btn btn-primary btn-large">
                üîç –ù–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
            </a>
            <a href="{% url 'vacancy_list' %}" class="btn btn-secondary btn-large">
                üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏
            </a>
        </div>

        {% if recent_vacancies %}
        <div class="recent-vacancies">
            <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏:</h3>
            <div class="vacancies-preview">
                {% for vacancy in recent_vacancies %}
                <div class="vacancy-preview-item">
                    <h4>{{ vacancy.title }}</h4>
                    <p class="company">{{ vacancy.company }}</p>
                    <p class="salary">{{ vacancy.salary }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- –£–î–ê–õ–ò–¢–ï –í–ï–°–¨ –ë–õ–û–ö style-switcher -->
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    // –ê–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –µ—Å–ª–∏ –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('keywords') || urlParams.has('min_salary') ||
        urlParams.has('experience') || urlParams.has('employment')) {

        setTimeout(() => {
            if (window.filtersManager && typeof window.filtersManager.applyFilters === 'function') {
                window.filtersManager.applyFilters();
            }
        }, 500);
    }
});

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤
function toggleFilters() {
    const container = document.getElementById('filtersFormContainer');
    if (container) {
        container.style.display = container.style.display === 'none' ? 'block' : 'none';
    }
}

function resetFilters() {
    const form = document.getElementById('filterForm');
    if (form) {
        form.reset();
    }
    const resultsDiv = document.getElementById('filterResults');
    if (resultsDiv) {
        resultsDiv.style.display = 'none';
    }
    if (window.filtersManager && typeof window.filtersManager.saveFilters === 'function') {
        window.filtersManager.saveFilters({});
    }
}

function hideFilterResults() {
    const resultsDiv = document.getElementById('filterResults');
    if (resultsDiv) {
        resultsDiv.style.display = 'none';
    }
}
</script>
{% endblock %}