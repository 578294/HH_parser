{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Парсер вакансий</title>
    <link rel="stylesheet" href="{% static 'parser/css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>Парсер вакансий</h1>
        <div class="style-menu-container">
            <button onclick="showStyleMenu()" class="style-menu-button">
                <i class="fas fa-palette"></i> Изменить стиль страницы
            </button>
            <div id="styleMenu" class="style-menu">
                <button onclick="changeStyle('SP')" class="style-option sp">
                    <i class="fas fa-tv"></i> Южный Парк
                </button>
                <button onclick="changeStyle('HP')" class="style-option hp">
                    <i class="fas fa-hat-wizard"></i> Хогвартс
                </button>
                <button onclick="changeStyle('WH')" class="style-option wh">
                    <i class="fas fa-skull"></i> Warhammer 40k
                </button>
            </div>
        </div>

        <div id="errorMessage" class="status-message error"></div>
        <div id="successMessage" class="status-message success"></div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('parse')">Парсинг</div>
            <div class="tab" onclick="switchTab('filter')">Фильтрация</div>
            <div class="tab" onclick="switchTab('generate')">Генератор писем</div>
            <div class="tab" onclick="switchTab('export')">Экспорт</div>
        </div>

        <div id="parse" class="tab-content active">
            <h2>Парсинг вакансий</h2>
            <form id="parseForm" method="post">
                <label for="sourceUrl">URL источника (hh.ru, career.habr.com и др.):</label>
                <input type="url" id="sourceUrl" name="sourceUrl" required placeholder="https://hh.ru/search/vacancy?text=python">
                <label for="pagesCount">Количество страниц для парсинга:</label>
                <input type="number" id="pagesCount" name="pagesCount" min="1" max="20" value="1">
                {% csrf_token %}
                <button type="submit" onclick=>Начать парсинг</button>
            </form>

            <div class="loading" id="loadingIndicator">
                <div class="loading-spinner"></div>
                <p>Идет парсинг вакансий...</p>
            </div>

            <div id="results">
                <h3>Результаты парсинга:</h3>
                <div id="vacancyResults"></div>
            </div>
        </div>

        <div id="filter" class="tab-content">
            <h2>Фильтрация вакансий</h2>
            <form id="filterForm">
                <label for="keywords">Ключевые слова:</label>
                <input type="text" id="keywords" name="keywords" placeholder="Python, Linux, Oracle">
                
                <label for="minSalary">Минимальная зарплата:</label>
                <input type="number" id="minSalary" name="minSalary" placeholder="100000">
                
                <label for="experience">Опыт работы:</label>
                <select id="experience" name="experience">
                    <option value="">Любой</option>
                    <option value="no">Нет опыта</option>
                    <option value="1-3">1-3 года</option>
                    <option value="3-6">3-6 лет</option>
                    <option value="6+">Более 6 лет</option>
                </select>
                
                <label for="employment">Тип занятости:</label>
                <select id="employment" name="employment">
                    <option value="">Любой</option>
                    <option value="full">Полная</option>
                    <option value="part">Частичная</option>
                    <option value="remote">Удаленная</option>
                    <option value="project">Проектная</option>
                </select>
                
                <button type="button" class="secondary-btn" onclick="applyFilters()">Применить фильтры</button>
            </form>
            
            <div id="filterResults">
                <!-- Здесь будут отображаться отфильтрованные вакансии -->
            </div>
        </div>

        <div id="generate" class="tab-content">
            <h2>Генератор сопроводительных писем</h2>
            <form id="letterForm">
                <label for="selectedVacancy">Выберите вакансию:</label>
                <select id="selectedVacancy" name="selectedVacancy" required>
                    <option value="">-- Выберите вакансию --</option>
                    <!-- Опции будут заполнены динамически -->
                </select>
                
                <label for="letterTemplate">Шаблон письма:</label>
                <select id="letterTemplate" name="letterTemplate">
                    <option value="standard">Стандартный</option>
                    <option value="support">Инженер сопровождения</option>
                    <option value="devops">DevOps</option>
                    <option value="backend">Backend-разработчик</option>
                    <option value="frontend">Frontend-разработчик</option>
                    <option value="manager">Менеджер</option>
                    <option value="custom">Пользовательский</option>
                </select>
                
                <label for="customText">Дополнительный текст (если нужно):</label>
                <textarea id="customText" name="customText" rows="4"></textarea>
                
                <button type="button" class="secondary-btn" onclick="generateLetter()">Сгенерировать письмо</button>
            </form>
            
            <div id="letterResult" class="letter-result">
                <h3>Результат:</h3>
                <div id="generatedLetter" class="generated-letter"></div>
                <button type="button" class="save-btn" onclick="saveLetter()">Сохранить письмо</button>
            </div>
        </div>

        <div id="export" class="tab-content">
            <h2>Экспорт данных</h2>
            <form id="exportForm">
                <label for="exportType">Формат экспорта:</label>
                <select id="exportType" name="exportType">
                    <option value="docx">DOCX (Word)</option>
                    <option value="pdf">PDF</option>
                    <option value="txt">TXT</option>
                    <option value="csv">CSV</option>
                    <option value="xlsx">XLSX (Excel)</option>
                </select>
                
                <label for="exportContent">Что экспортировать:</label>
                <select id="exportContent" name="exportContent">
                    <option value="vacancies">Только вакансии</option>
                    <option value="letters">Только письма</option>
                    <option value="all">Вакансии и письма</option>
                </select>
                
                <button type="button" onclick="exportData()">Экспортировать</button>
            </form>
        </div>
    </div>

    <script src="{% static 'parser/js/main.js' %}"></script>
</body>
</html>