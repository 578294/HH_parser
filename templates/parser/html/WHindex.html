{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'parser/css/WHstyle.css' %}">
    <title>Парсер вакансий Империума</title>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-skull aquila-icon"></i> ПАРСЕР ВАКАНСИЙ ИМПЕРИУМА</h1>

        <div style="text-align: center; margin-bottom: 20px;">
            <button onclick="window.location.href='{% url 'index' %}'" style="background-color: #6c757d; padding: 8px 15px;">
                <i class="fas fa-arrow-left"></i> Вернуться к обычному стилю
            </button>
        </div>
        
        <div id="errorMessage" class="status-message error"></div>
        <div id="successMessage" class="status-message success"></div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('parse')">
                <i class="fas fa-search aquila-icon"></i> СКАНДИРОВАНИЕ
            </div>
            <div class="tab" onclick="switchTab('filter')">
                <i class="fas fa-filter aquila-icon"></i> ПУРГАЦИЯ
            </div>
            <div class="tab" onclick="switchTab('generate')">
                <i class="fas fa-scroll aquila-icon"></i> МОЛИТВОПИСЬ
            </div>
            <div class="tab" onclick="switchTab('export')">
                <i class="fas fa-file-export aquila-icon"></i> АРХИВАЦИЯ
            </div>
        </div>

        <div id="parse" class="tab-content active">
            <h2>СКАНДИРОВАНИЕ ВАКАНСИЙ</h2>
            <form id="parseForm">
                <label for="sourceUrl">ДАННЫЕ СЕРВИТОРА:</label>
                <input type="url" id="sourceUrl" name="sourceUrl" required placeholder="https://imperium-careers.terra/search?servitor=python">
                
                <label for="pagesCount">ЧИСЛО СТРАНИЦ КОДЕКСА:</label>
                <input type="number" id="pagesCount" name="pagesCount" min="1" max="20" value="1">
                
                <button type="button" onclick="startParsing()">ИНИЦИИРОВАТЬ СКАНДИРОВАНИЕ</button>
            </form>

            <div class="loading" id="loadingIndicator">
                <div class="loading-spinner"></div>
                <p>СКАНДИРУЕМ ДАННЫЕ... МОЛИТЕСЬ ОБ УСПЕХЕ</p>
            </div>

            <div id="results">
                <h3>ОБНАРУЖЕНО ВАКАНСИЙ:</h3>
                <div id="vacancyResults"></div>
            </div>
        </div>

        <div id="filter" class="tab-content">
            <h2>ПУРГАЦИЯ ДАННЫХ</h2>
            <form id="filterForm">
                <label for="keywords">СВЯЩЕННЫЕ РУНЫ:</label>
                <input type="text" id="keywords" name="keywords" placeholder="PYTHON, MACHINE SPIRIT, HERESY...">
                
                <label for="minSalary">МИНИМАЛЬНАЯ ДЕСЯТИНА (В ТРОННЫХ ДУКАТАХ):</label>
                <input type="number" id="minSalary" name="minSalary" placeholder="100">
                
                <label for="experience">ОПЫТ СЛУЖЕНИЯ:</label>
                <select id="experience" name="experience">
                    <option value="">ЛЮБОЙ</option>
                    <option value="no">НЕОФИТ (КАК НОВОБРАНЕЦ АДЕПТУС АСТАРТЕС)</option>
                    <option value="1-3">1-3 ГОДА (КАК ОПЫТНЫЙ ГВАРДИЕЦ)</option>
                    <option value="3-6">3-6 ЛЕТ (КАК ВЕТЕРАН КАДИИ)</option>
                    <option value="6+">БОЛЕЕ 6 ЛЕТ (КАК СЕРЫЙ РЫЦАРЬ)</option>
                </select>
                
                <label for="employment">ФОРМА СЛУЖЕНИЯ:</label>
                <select id="employment" name="employment">
                    <option value="">ЛЮБАЯ</option>
                    <option value="full">ПОЛНАЯ (КАК У АДЕПТУС МЕХАНИКУС)</option>
                    <option value="part">ЧАСТИЧНАЯ (КАК У МИЛИТАРУМ ТЕМПЕСТУС)</option>
                    <option value="remote">ДИСТАНЦИОННАЯ (КАК У АСТРОПАТА)</option>
                    <option value="project">КРЕСТОВЫЙ ПОХОД (ПРОЕКТНАЯ)</option>
                </select>
                
                <button type="button" class="secondary-btn" onclick="applyFilters()">СОВЕРШИТЬ ПУРГАЦИЮ</button>
            </form>
            
            <div id="filterResults"></div>
        </div>

        <div id="generate" class="tab-content">
            <h2>МОЛИТВОПИСЬ СОИСКАТЕЛЯ</h2>
            <form id="letterForm">
                <label for="selectedVacancy">ИЗБРАТЬ ВАКАНСИЮ:</label>
                <select id="selectedVacancy" name="selectedVacancy" required>
                    <option value="">-- ИЗБЕРИТЕ ВАКАНСИЮ --</option>
                </select>
                
                <label for="letterTemplate">ФОРМАТ МОЛИТВОПИСИ:</label>
                <select id="letterTemplate" name="letterTemplate">
                    <option value="standard">СТАНДАРТНАЯ (АДЕПТУС ТЕРА)</option>
                    <option value="support">ИНЖЕНЕР СОПРОВОЖДЕНИЯ (СТИЛЬ АДЕПТУС МЕХАНИКУС)</option>
                    <option value="devops">DEVOPS (СТИЛЬ ТЕХНОЖРЕЦА)</option>
                    <option value="backend">BACKEND-РАЗРАБОТЧИК (СТИЛЬ АРХИМАГА)</option>
                    <option value="frontend">FRONTEND-РАЗРАБОТЧИК (СТИЛЬ СКИТАРИ)</option>
                    <option value="manager">МЕНЕДЖЕР (СТИЛЬ КОМИССАРА)</option>
                    <option value="custom">ПОЛЬЗОВАТЕЛЬСКАЯ (СТИЛЬ ИНКВИЗИТОРА)</option>
                </select>
                
                <label for="customText">ДОПОЛНИТЕЛЬНЫЕ ЛИТАНИИ:</label>
                <textarea id="customText" name="customText" rows="4" placeholder="ДОБАВЬТЕ СВОИ ЛИТАНИИ ПРОТИВ ЕРЕСИ..."></textarea>
                
                <button type="button" class="secondary-btn" onclick="generateLetter()">СОЗДАТЬ МОЛИТВОПИСЬ</button>
            </form>
            
            <div id="letterResult" style="margin-top: 20px; display: none;">
                <h3>РЕЗУЛЬТАТ:</h3>
                <div id="generatedLetter" class="parchment"></div>
                <button type="button" style="margin-top: 10px;" onclick="saveLetter()">ВНЕСТИ В КОДЕКС</button>
            </div>
        </div>

        <div id="export" class="tab-content">
            <h2>АРХИВАЦИЯ ДАННЫХ</h2>
            <form id="exportForm">
                <label for="exportType">ФОРМАТ АРХИВАЦИИ:</label>
                <select id="exportType" name="exportType">
                    <option value="docx">КЕРБЕР (DOCX)</option>
                    <option value="pdf">СВЯЩЕННЫЙ СВИТОК (PDF)</option>
                    <option value="txt">ДОКСОГРАФИЯ (TXT)</option>
                    <option value="csv">ТАБУЛЯРУМ (CSV)</option>
                    <option value="xlsx">КОДЕКС (XLSX)</option>
                </select>
                
                <label for="exportContent">ЧТО АРХИВИРОВАТЬ:</label>
                <select id="exportContent" name="exportContent">
                    <option value="vacancies">ТОЛЬКО ВАКАНСИИ</option>
                    <option value="letters">ТОЛЬКО МОЛИТВОПИСИ</option>
                    <option value="all">ВАКАНСИИ И МОЛИТВОПИСИ</option>
                </select>
                
                <button type="button" onclick="exportData()">СОВЕРШИТЬ АРХИВАЦИЮ</button>
            </form>
        </div>
    </div>

    <script src="{% static 'parser/js/WHscript.js' %}"></script>
</body>
</html>